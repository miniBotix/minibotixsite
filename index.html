<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MiniBotix</title>
  <style>
    /* ===== Reset & Theme ===== */
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif; }
    body { background: #0d1117; color: #e6edf3; line-height: 1.6; }

    /* ===== Header ===== */
    header { display: flex; justify-content: space-between; align-items: center; padding: 15px 40px; background: #161b22; position: sticky; top: 0; z-index: 100; }
    header h1 { font-size: 24px; color: #1e90ff; }
    nav ul { list-style: none; display: flex; gap: 20px; }
    nav ul li a { color: #e6edf3; text-decoration: none; font-weight: bold; transition: 0.3s; }
    nav ul li a:hover { color: #1e90ff; }

    /* ===== User Menu ===== */
    #userMenu { position: relative; display: flex; align-items: center; gap: 10px; }
    #loginBtn { background: #1e90ff; border: none; color: white; padding: 8px 15px; border-radius: 6px; cursor: pointer; }
    #userBtn { display: none; background: #1e90ff; border: none; color: white; padding: 8px 12px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 8px; }
    #userDropdown { display: none; position: absolute; top: 50px; right: 0; background: #161b22; border: 1px solid #30363d; border-radius: 6px; min-width: 180px; }
    #userDropdown a { display: block; padding: 10px; text-decoration: none; color: #e6edf3; }
    #userDropdown a:hover { background: #1e90ff; }

    #userAvatar { width: 28px; height: 28px; border-radius: 50%; }

    /* ===== Hero ===== */
    .hero { height: 70vh; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; background: linear-gradient(120deg, #0d1117, #161b22); padding: 20px; }
    .hero h2 { font-size: 40px; margin-bottom: 15px; color: #1e90ff; }
    .hero p { font-size: 18px; margin-bottom: 25px; }
    .btn { display: inline-block; padding: 12px 25px; border-radius: 6px; background: #1e90ff; color: white; text-decoration: none; transition: 0.3s; }
    .btn:hover { background: #3399ff; }

    /* ===== Sections ===== */
    section { padding: 60px 40px; text-align: center; }
    section h3 { font-size: 28px; margin-bottom: 20px; color: #1e90ff; }
    section p { max-width: 700px; margin: auto; margin-bottom: 20px; }
    section .btn { margin-top: 15px; }

    /* ===== Footer ===== */
    footer { background: #161b22; text-align: center; padding: 20px; font-size: 14px; border-top: 1px solid #30363d; }

    /* ===== Form Modal ===== */
    #loginModal { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.7); justify-content:center; align-items:center; }
    #loginForm { background: #161b22; padding: 30px; border-radius: 8px; width: 300px; text-align: center; }
    #loginForm input { width: 100%; padding: 10px; margin: 10px 0; border-radius: 6px; border: 1px solid #30363d; background: #0d1117; color: #e6edf3; }
    #loginForm button { padding: 10px 20px; border-radius: 6px; border: none; background: #1e90ff; color: white; cursor: pointer; margin-top: 10px; }
    #loginForm button:hover { background: #3399ff; }
    #closeModal { cursor: pointer; color: #ff4c4c; float: right; font-weight: bold; }
  </style>
</head>
<body>
  <!-- ===== Header ===== -->
  <header>
    <h1>MiniBotix</h1>
    <nav>
      <ul>
        <li><a href="college.html">College</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="courses.html">Courses</a></li>
        <li><a href="services.html">Services</a></li>
      </ul>
    </nav>
    <div id="userMenu">
      <button id="loginBtn">Sign In</button>
      <button id="userBtn"><img id="userAvatar" src="" alt="avatar"> User ▼</button>
      <div id="userDropdown">
        <a id="profileInfo" href="#">Profile</a>
        <a href="#" id="logoutBtn">Logout</a>
      </div>
    </div>
  </header>

  <!-- ===== Hero Section ===== -->
  <section class="hero">
    <h2>Welcome to MiniBotix</h2>
    <p>Empowering students with technology, innovation, and creativity.</p>
    <a href="courses.html" class="btn">Explore Courses</a>
  </section>

  <!-- ===== About ===== -->
  <section>
    <h3>About Us</h3>
    <p>MiniBotix is a platform designed to help students and professionals explore the world of robotics, IoT, and AI. Learn, build, and innovate with us.</p>
    <a href="about.html" class="btn">Learn More</a>
  </section>

  <!-- ===== Courses ===== -->
  <section>
    <h3>Our Courses</h3>
    <p>From beginner to advanced, explore structured courses in robotics, coding, and electronics.</p>
    <a href="courses.html" class="btn">View Courses</a>
  </section>

  <!-- ===== Services ===== -->
  <section>
    <h3>Services</h3>
    <p>We provide hands-on training, workshops, and project support for students and colleges.</p>
    <a href="services.html" class="btn">Our Services</a>
  </section>

  <!-- ===== Footer ===== -->
  <footer>
    <p>© 2025 MiniBotix. All Rights Reserved.</p>
  </footer>

  <!-- ===== Login Modal ===== -->
  <div id="loginModal">
    <div id="loginForm">
      <span id="closeModal">✖</span>
      <h3>Sign In / Sign Up</h3>
      <input type="email" id="email" placeholder="Email" required>
      <input type="password" id="password" placeholder="Password" required>
      <button id="emailLoginBtn">Sign In / Sign Up</button>
    </div>
  </div>

  <!-- ===== Firebase Auth ===== -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDWmliHHP7UR1pmM6CNjY6o_NvF-hYJWpY",
      authDomain: "minibotix-a1b9a.firebaseapp.com",
      projectId: "minibotix-a1b9a",
      storageBucket: "minibotix-a1b9a.appspot.com",
      messagingSenderId: "771169717230",
      appId: "1:771169717230:web:44848d73e548d0e0f8dcff",
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    // Elements
    const loginBtn = document.getElementById("loginBtn");
    const userBtn = document.getElementById("userBtn");
    const userDropdown = document.getElementById("userDropdown");
    const logoutBtn = document.getElementById("logoutBtn");
    const userAvatar = document.getElementById("userAvatar");
    const profileInfo = document.getElementById("profileInfo");

    const loginModal = document.getElementById("loginModal");
    const closeModal = document.getElementById("closeModal");
    const emailLoginBtn = document.getElementById("emailLoginBtn");
    const emailInput = document.getElementById("email");
    const passwordInput = document.getElementById("password");

    // Open login modal
    loginBtn.addEventListener("click", () => loginModal.style.display = "flex");
    closeModal.addEventListener("click", () => loginModal.style.display = "none");

    // Sign in / Sign up
    emailLoginBtn.addEventListener("click", async () => {
      const email = emailInput.value;
      const password = passwordInput.value;
      if(!email || !password) { alert("Enter email and password"); return; }

      try {
        // Try to create user
        await createUserWithEmailAndPassword(auth, email, password);
        alert("Account created and signed in!");
      } catch (err) {
        if (err.code === "auth/email-already-in-use") {
          // If exists, sign in
          try {
            await signInWithEmailAndPassword(auth, email, password);
            alert("Signed in successfully!");
          } catch (e) {
            alert("Login failed: " + e.message);
          }
        } else {
          alert("Error: " + err.message);
        }
      }
      loginModal.style.display = "none";
      emailInput.value = "";
      passwordInput.value = "";
    });

    // Toggle dropdown
    userBtn.addEventListener("click", () => {
      userDropdown.style.display = userDropdown.style.display === "block" ? "none" : "block";
    });

    // Logout
    logoutBtn.addEventListener("click", async () => {
      await signOut(auth);
      userDropdown.style.display = "none";
    });

    // Auth state
    onAuthStateChanged(auth, user => {
      if(user){
        loginBtn.style.display = "none";
        userBtn.style.display = "flex";
        userBtn.innerHTML = `<img id="userAvatar" src="${user.photoURL || 'https://via.placeholder.com/28'}" alt="avatar"> ${user.displayName || user.email} ▼`;
        profileInfo.textContent = `${user.displayName || "User"} - ${user.email}`;
      } else {
        loginBtn.style.display = "inline-block";
        userBtn.style.display = "none";
        userDropdown.style.display = "none";
      }
    });
  </script>
</body>
</html>
