<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Projects Â· MiniBotix</title>
<link rel="icon" href="file.svg" type="image/svg+xml">
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600;700;800&family=DM+Mono:wght@300;400;500&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#030912;--bg1:#060e1c;--bg2:#0a1628;--bg3:#0d1e35;
  --line:rgba(0,160,255,0.08);--line-hi:rgba(0,180,255,0.2);
  --c:#00b4ff;--c2:#0052cc;--cg:#00ffa3;--co:#ff8c42;--cr:#ff4060;
  --cp:#b06fff;--cy:#ffe066;
  --txt:#daeeff;--txt2:#6b8fa8;
  --glow:0 0 40px rgba(0,160,255,0.14);
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{font-family:'DM Sans',system-ui,sans-serif;background:var(--bg);color:var(--txt);overflow-x:hidden;line-height:1.6}
a{color:inherit;text-decoration:none}
::selection{background:rgba(0,180,255,0.25)}
::-webkit-scrollbar{width:3px}::-webkit-scrollbar-track{background:var(--bg)}
::-webkit-scrollbar-thumb{background:var(--line-hi);border-radius:2px}

/* BG */
#rain{position:fixed;inset:0;z-index:0;pointer-events:none}
.gbg{position:fixed;inset:0;z-index:1;pointer-events:none;
  background-image:linear-gradient(var(--line)1px,transparent 1px),linear-gradient(90deg,var(--line)1px,transparent 1px);
  background-size:48px 48px;
  mask-image:radial-gradient(ellipse 90% 70% at 50% 0%,black 20%,transparent 100%)}
.rglow{position:fixed;top:-20%;left:50%;transform:translateX(-50%);width:1000px;height:700px;
  background:radial-gradient(ellipse at center,rgba(0,70,200,0.16)0%,transparent 70%);z-index:1;pointer-events:none}
header,main,footer,section,.page{position:relative;z-index:10}

/* NAVBAR */
header{position:fixed;top:0;left:0;right:0;height:62px;z-index:200;
  display:flex;align-items:center;justify-content:space-between;padding:0 28px;
  background:rgba(3,9,18,0.9);backdrop-filter:blur(18px) saturate(1.6);
  border-bottom:1px solid var(--line);transition:box-shadow .3s}
header.scrolled{box-shadow:0 4px 50px rgba(0,0,0,.7)}
.brand{display:flex;align-items:center;gap:11px;cursor:pointer;user-select:none}
.bm{width:34px;height:34px;border-radius:8px;background:linear-gradient(135deg,var(--c2),var(--c));
  display:flex;align-items:center;justify-content:center;
  font-family:'Syne',sans-serif;font-weight:800;font-size:15px;color:#fff;
  box-shadow:0 4px 18px rgba(0,120,255,0.4);flex-shrink:0}
.bn{font-family:'Syne',sans-serif;font-weight:700;font-size:17px;letter-spacing:-.01em}
.bn em{color:var(--c);font-style:normal}

nav.main-nav{display:flex;gap:1px}
nav.main-nav a{font-size:11.5px;font-weight:500;letter-spacing:.05em;text-transform:uppercase;
  color:var(--txt2);padding:6px 10px;border-radius:6px;transition:color .2s,background .2s;position:relative}
nav.main-nav a::after{content:'';position:absolute;bottom:2px;left:50%;transform:translateX(-50%);
  width:0;height:1.5px;background:var(--c);border-radius:1px;transition:width .25s}
nav.main-nav a:hover{color:var(--c);background:rgba(0,180,255,0.05)}
nav.main-nav a:hover::after{width:55%}
nav.main-nav a.active{color:var(--c)}
nav.main-nav a.active::after{width:55%}

.nr{display:flex;align-items:center;gap:12px}
.cpill{display:flex;align-items:center;gap:7px;background:var(--bg2);border:1px solid var(--line-hi);
  border-radius:999px;padding:5px 12px;cursor:default;user-select:none}
.pulse{width:6px;height:6px;border-radius:50%;background:var(--cg);flex-shrink:0;animation:blink 2s infinite}
@keyframes blink{0%,100%{opacity:1;box-shadow:0 0 7px var(--cg)}50%{opacity:.25;box-shadow:none}}
.csw{width:22px;height:22px;flex-shrink:0}
#navClock{font-family:'DM Mono',monospace;font-size:11px;font-weight:500;color:var(--cg)}
.btn-o{background:transparent;border:1px solid var(--line-hi);padding:7px 14px;border-radius:7px;
  color:var(--txt2);font-family:'DM Sans',sans-serif;font-size:12px;font-weight:600;letter-spacing:.04em;cursor:pointer;transition:all .2s}
.btn-o:hover{border-color:var(--c);color:var(--c);background:rgba(0,180,255,0.05)}
.btn-s{background:linear-gradient(135deg,var(--c2),var(--c));border:none;padding:8px 16px;border-radius:7px;
  color:#fff;font-family:'DM Sans',sans-serif;font-size:12px;font-weight:700;letter-spacing:.04em;
  cursor:pointer;box-shadow:0 4px 18px rgba(0,100,255,0.35);transition:opacity .2s,transform .15s}
.btn-s:hover{opacity:.88;transform:translateY(-1px)}
.ham{display:none;width:40px;height:40px;border:1px solid var(--line);border-radius:7px;
  background:transparent;cursor:pointer;flex-direction:column;align-items:center;justify-content:center;gap:5px}
.ham span{width:18px;height:1.5px;background:var(--txt2);border-radius:1px;display:block}
#sui{display:none}
.apill{display:flex;align-items:center;gap:8px;padding:5px 12px 5px 5px;background:var(--bg2);
  border:1px solid var(--line-hi);border-radius:999px;cursor:pointer;transition:background .2s}
.apill:hover{background:var(--bg3)}
.apill img{width:26px;height:26px;border-radius:50%;object-fit:cover}
.apill .aname{font-size:12px;font-weight:600}
.apill .gear{color:var(--txt2);font-size:13px;margin-left:3px}

#mobileNav{display:none;flex-direction:column;gap:2px;position:fixed;top:62px;left:0;right:0;
  background:rgba(4,10,20,0.98);backdrop-filter:blur(16px);
  border-bottom:1px solid var(--line);padding:12px 16px 20px;z-index:190}
#mobileNav.open{display:flex}
#mobileNav a{padding:11px 12px;border-radius:7px;font-size:13px;font-weight:500;
  color:var(--txt2);border-left:2px solid transparent;transition:all .2s}
#mobileNav a:hover{background:var(--bg2);color:var(--c);border-left-color:var(--c)}

/* PAGE HERO */
.page-hero{padding:120px 28px 72px;text-align:center}
.page-hero .con{max-width:700px;margin:0 auto}
.htag{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--line-hi);border-radius:4px;
  padding:5px 12px;margin-bottom:28px;font-family:'DM Mono',monospace;font-size:10px;
  letter-spacing:.12em;text-transform:uppercase;color:var(--c);background:rgba(0,180,255,0.04)}
.htag .hd{width:5px;height:5px;border-radius:50%;background:var(--cg);animation:blink 1.8s infinite}
.page-hero h1{font-family:'Syne',sans-serif;font-weight:800;font-size:clamp(38px,5vw,64px);
  letter-spacing:-.03em;line-height:1.05;margin-bottom:20px}
.page-hero h1 .acc{background:linear-gradient(90deg,var(--c),var(--cg));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.page-hero p{color:var(--txt2);font-size:16px;line-height:1.72;max-width:560px;margin:0 auto 28px}
.hero-actions{display:flex;gap:12px;justify-content:center;flex-wrap:wrap}

/* SEP */
.sep{height:1px;background:linear-gradient(90deg,transparent,var(--line-hi),transparent)}

/* SECTION */
.section{padding:80px 28px}
.con{max-width:1140px;margin:0 auto}
.sl2{display:inline-flex;align-items:center;gap:7px;
  font-family:'DM Mono',monospace;font-size:9px;letter-spacing:.14em;text-transform:uppercase;
  color:var(--c);border:1px solid var(--line-hi);padding:4px 10px;border-radius:3px;
  background:rgba(0,180,255,0.04);margin-bottom:16px}
.sn{color:var(--txt2)}
h2.sh{font-family:'Syne',sans-serif;font-weight:800;font-size:clamp(26px,3.2vw,40px);
  letter-spacing:-.02em;margin-bottom:12px}
.lead{color:var(--txt2);font-size:15px;line-height:1.72;max-width:560px;margin-bottom:32px}

/* CONTROLS BAR */
.controls-bar{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-bottom:32px;
  background:var(--bg2);border:1px solid var(--line);border-radius:10px;padding:14px 18px}
.search-wrap{flex:1;min-width:220px;display:flex;gap:8px;align-items:center}
.search-input{flex:1;padding:9px 14px;background:var(--bg1);border:1px solid var(--line-hi);
  border-radius:7px;color:var(--txt);font-family:'DM Sans',sans-serif;font-size:13px;outline:none;
  transition:border-color .2s,box-shadow .2s}
.search-input::placeholder{color:var(--txt2)}
.search-input:focus{border-color:var(--c);box-shadow:0 0 0 3px rgba(0,180,255,0.08)}
.clear-btn{padding:9px 10px;background:transparent;border:1px solid var(--line-hi);border-radius:7px;
  color:var(--txt2);cursor:pointer;transition:all .2s;font-size:13px}
.clear-btn:hover{border-color:var(--cr);color:var(--cr)}
.filter-select{padding:9px 14px;background:var(--bg1);border:1px solid var(--line-hi);
  border-radius:7px;color:var(--txt);font-family:'DM Mono',monospace;font-size:10px;
  letter-spacing:.04em;outline:none;cursor:pointer;transition:border-color .2s;
  appearance:none;-webkit-appearance:none;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6' viewBox='0 0 10 6'%3E%3Cpath d='M0 0l5 6 5-6z' fill='%236b8fa8'/%3E%3C/svg%3E");
  background-repeat:no-repeat;background-position:right 10px center;padding-right:28px}
.filter-select:focus{border-color:var(--c)}
.result-count{font-family:'DM Mono',monospace;font-size:10px;color:var(--txt2);
  letter-spacing:.06em;text-transform:uppercase;white-space:nowrap;margin-left:auto}

/* PROJECTS GRID */
.projects-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}

/* PROJECT CARD */
.proj-card{
  background:var(--bg2);border:1px solid var(--line);border-radius:14px;
  overflow:hidden;transition:transform .3s,border-color .3s,box-shadow .3s;
  position:relative;display:flex;flex-direction:column;cursor:pointer;
}
.proj-card:hover{transform:translateY(-6px);border-color:var(--line-hi);box-shadow:var(--glow)}
.proj-card::before{
  content:'';position:absolute;top:0;left:0;right:0;height:2px;
  background:linear-gradient(90deg,var(--cp),var(--c));
  transform:scaleX(0);transform-origin:left;
  transition:transform .35s cubic-bezier(.4,0,.2,1);z-index:2;
}
.proj-card:hover::before{transform:scaleX(1)}
.proj-card:focus{outline:2px solid var(--c);outline-offset:2px}

.pc-thumb{height:180px;background:var(--bg1);display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}
.pc-thumb img{width:100%;height:100%;object-fit:cover;transition:transform .4s}
.proj-card:hover .pc-thumb img{transform:scale(1.04)}
.pc-placeholder{font-size:52px;opacity:.25}

.pc-cat-badge{position:absolute;top:12px;left:12px;z-index:3;
  font-family:'DM Mono',monospace;font-size:8px;letter-spacing:.1em;text-transform:uppercase;
  padding:4px 8px;border-radius:3px;background:rgba(0,0,0,0.7);border:1px solid var(--cp);
  color:var(--cp);backdrop-filter:blur(4px)}

.pc-body{padding:20px 22px;flex:1;display:flex;flex-direction:column;gap:6px}
.pc-title{font-family:'Syne',sans-serif;font-weight:700;font-size:16px;line-height:1.3}
.pc-meta{font-family:'DM Mono',monospace;font-size:9px;letter-spacing:.08em;text-transform:uppercase;
  color:var(--txt2);margin-bottom:4px}
.pc-desc{font-size:13px;color:var(--txt2);line-height:1.65;flex:1}
.pc-tags{display:flex;flex-wrap:wrap;gap:5px;margin-top:8px}
.pc-tag{font-family:'DM Mono',monospace;font-size:9px;letter-spacing:.06em;text-transform:uppercase;
  padding:3px 7px;border-radius:3px;background:rgba(176,111,255,0.06);
  border:1px solid rgba(176,111,255,0.2);color:var(--cp)}
.pc-team{font-family:'DM Mono',monospace;font-size:9px;letter-spacing:.06em;text-transform:uppercase;
  color:var(--txt2);border:1px solid var(--line);padding:3px 7px;border-radius:3px;
  background:rgba(255,255,255,0.02);display:inline-block;margin-top:4px;align-self:flex-start}

.pc-actions{display:flex;gap:8px;padding:14px 22px;border-top:1px solid var(--line);background:rgba(0,0,0,0.15)}
.btn-view-proj{flex:1;padding:9px 14px;background:transparent;border:1px solid var(--line-hi);
  border-radius:7px;color:var(--txt2);font-family:'DM Sans',sans-serif;font-size:12px;font-weight:600;
  cursor:pointer;transition:all .2s;text-align:center}
.btn-view-proj:hover{border-color:var(--cp);color:var(--cp);background:rgba(176,111,255,0.05)}
.btn-share-proj{padding:9px 12px;background:transparent;border:1px solid var(--line-hi);
  border-radius:7px;color:var(--txt2);cursor:pointer;transition:all .2s;font-size:12px}
.btn-share-proj:hover{border-color:var(--c);color:var(--c);background:rgba(0,180,255,0.05)}

/* NO RESULTS */
.no-results{text-align:center;padding:64px 28px;color:var(--txt2)}
.no-results .ei{font-size:52px;margin-bottom:16px;opacity:.4}

/* VIEWER MODAL */
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;
  background:rgba(0,0,0,0.82);z-index:500;backdrop-filter:blur(10px);padding:20px}
.modal.open{display:flex}

.viewer-wrap{width:100%;max-width:980px;background:var(--bg2);border:1px solid var(--line-hi);
  border-radius:16px;overflow:hidden;animation:sUp .3s ease;
  display:grid;grid-template-columns:380px 1fr;max-height:88vh}
@keyframes sUp{from{opacity:0;transform:translateY(24px)}to{opacity:1;transform:translateY(0)}}

.viewer-img{background:var(--bg1);display:flex;align-items:center;justify-content:center;overflow:hidden}
.viewer-img img{width:100%;height:100%;object-fit:cover;display:block}
.viewer-img .vi-placeholder{font-size:72px;opacity:.2}

.viewer-content{display:flex;flex-direction:column;max-height:88vh;overflow:hidden}
.viewer-head{display:flex;align-items:flex-start;justify-content:space-between;gap:12px;
  padding:24px 26px 20px;border-bottom:1px solid var(--line);flex-shrink:0}
.vh-info h3{font-family:'Syne',sans-serif;font-weight:700;font-size:20px;margin-bottom:6px;line-height:1.3}
.vh-meta{font-family:'DM Mono',monospace;font-size:9px;letter-spacing:.1em;text-transform:uppercase;color:var(--txt2)}
.vh-cat{font-family:'DM Mono',monospace;font-size:9px;letter-spacing:.1em;text-transform:uppercase;
  padding:3px 8px;border-radius:3px;border:1px solid rgba(176,111,255,0.25);
  color:var(--cp);background:rgba(176,111,255,0.06);display:inline-block;margin-top:6px}
.vh-btns{display:flex;gap:8px;flex-shrink:0}
.zoom-btn{width:34px;height:34px;border-radius:7px;border:1px solid var(--line-hi);background:transparent;
  color:var(--txt2);cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;font-size:14px}
.zoom-btn:hover{border-color:var(--c);color:var(--c)}
.close-btn{width:34px;height:34px;border-radius:7px;border:1px solid var(--line-hi);background:transparent;
  color:var(--txt2);cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;font-size:18px;line-height:1}
.close-btn:hover{border-color:var(--cr);color:var(--cr)}

.viewer-body{padding:24px 26px;overflow-y:auto;flex:1}
.vb-desc{font-size:14px;color:var(--txt2);line-height:1.72;margin-bottom:20px}
.vb-tags{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:20px}
.vb-tag{font-family:'DM Mono',monospace;font-size:9px;letter-spacing:.07em;text-transform:uppercase;
  padding:4px 8px;border-radius:3px;background:rgba(176,111,255,0.06);
  border:1px solid rgba(176,111,255,0.2);color:var(--cp)}

.viewer-foot{display:flex;gap:10px;padding:18px 26px;border-top:1px solid var(--line);background:rgba(0,0,0,0.2);flex-shrink:0}
.btn-discuss{flex:1;padding:10px;background:linear-gradient(135deg,#3d0088,var(--cp));border:none;
  border-radius:7px;color:#fff;font-family:'DM Sans',sans-serif;font-size:12px;font-weight:700;
  cursor:pointer;box-shadow:0 4px 14px rgba(176,111,255,0.25);transition:opacity .2s,transform .15s;text-align:center}
.btn-discuss:hover{opacity:.88;transform:translateY(-1px)}
.btn-assets{padding:10px 16px;background:transparent;border:1px solid var(--line-hi);border-radius:7px;
  color:var(--txt2);font-family:'DM Sans',sans-serif;font-size:12px;font-weight:600;
  cursor:pointer;transition:all .2s}
.btn-assets:hover{border-color:var(--c);color:var(--c)}

/* AUTH MODAL */
.mc{width:100%;max-width:420px;background:var(--bg2);border:1px solid var(--line-hi);
  border-radius:14px;overflow:hidden;animation:sUp .3s ease}
.mc-head{display:flex;align-items:center;justify-content:space-between;
  padding:20px 24px;border-bottom:1px solid var(--line)}
.mc-head h3{font-family:'Syne',sans-serif;font-weight:700;font-size:18px}
.mcc{color:var(--txt2);font-size:22px;cursor:pointer;line-height:1;transition:color .2s;background:none;border:none}
.mcc:hover{color:#fff}
.mc-body{padding:24px}
.tabs{display:flex;gap:4px;background:var(--bg1);border-radius:8px;padding:4px;margin-bottom:20px}
.tab{flex:1;padding:8px;border-radius:6px;border:none;background:transparent;color:var(--txt2);
  font-family:'DM Sans',sans-serif;font-size:12px;font-weight:600;cursor:pointer;transition:all .2s}
.tab.on{background:linear-gradient(135deg,var(--c2),var(--c));color:#fff;box-shadow:0 2px 14px rgba(0,100,255,0.3)}
.fg{margin-bottom:14px}
.fg label{display:block;font-family:'DM Mono',monospace;font-size:10px;letter-spacing:.08em;
  text-transform:uppercase;color:var(--txt2);margin-bottom:6px}
.fg input{width:100%;padding:11px 14px;background:var(--bg1);border:1px solid var(--line-hi);
  border-radius:7px;color:var(--txt);font-family:'DM Sans',sans-serif;font-size:13px;outline:none;
  transition:border-color .2s,box-shadow .2s}
.fg input:focus{border-color:var(--c);box-shadow:0 0 0 3px rgba(0,180,255,0.08)}
.ma{display:flex;gap:10px;margin-top:20px}
.ma .btn-s{flex:1;padding:11px}
.ma .btn-o{padding:11px 16px;font-size:13px}
.mnote{font-size:11px;color:var(--txt2);margin-top:12px}

/* PROFILE MODAL */
.mc.pmc{max-width:420px}

/* TOAST */
.toast{position:fixed;bottom:28px;left:50%;transform:translateX(-50%);padding:11px 18px;
  border-radius:8px;font-size:13px;font-weight:500;z-index:9999;box-shadow:0 8px 30px rgba(0,0,0,.5);
  animation:toastIn .3s ease}
@keyframes toastIn{from{opacity:0;transform:translateX(-50%) translateY(10px)}to{opacity:1;transform:translateX(-50%) translateY(0)}}

/* FOOTER */
footer{padding:26px 28px;border-top:1px solid var(--line);
  display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:16px}
.finfo{font-family:'DM Mono',monospace;font-size:11px;color:var(--txt2)}
.flinks{display:flex;gap:18px;font-size:12px;color:var(--txt2)}
.flinks a:hover{color:var(--c)}

/* SKELETON */
.skeleton{background:linear-gradient(90deg,var(--bg1),var(--bg2),var(--bg1));
  background-size:400px 100%;animation:shimmer 1.6s infinite;border-radius:6px}
@keyframes shimmer{0%{background-position:-400px 0}100%{background-position:400px 0}}

/* REVEAL */
.reveal{opacity:0;transform:translateY(30px);transition:opacity .75s ease,transform .75s ease}
.reveal.in{opacity:1;transform:translateY(0)}
.d1{transition-delay:.1s}.d2{transition-delay:.18s}.d3{transition-delay:.26s}

/* RESPONSIVE */
@media(max-width:1020px){nav.main-nav{display:none}.ham{display:flex}}
@media(max-width:800px){.viewer-wrap{grid-template-columns:1fr;max-width:520px}.viewer-img{height:220px}}
@media(max-width:640px){header{padding:0 16px}.section{padding:56px 16px}.page-hero{padding:100px 16px 56px}.projects-grid{grid-template-columns:1fr}.hero-actions{flex-direction:column;align-items:center}.controls-bar{padding:12px}.viewer-wrap{grid-template-columns:1fr}footer{flex-direction:column;align-items:flex-start}}
</style>
</head>
<body>

<canvas id="rain"></canvas>
<div class="gbg"></div>
<div class="rglow"></div>

<!-- NAVBAR -->
<header id="hdr">
  <div class="brand" onclick="location.href='index.html'">
    <div class="bm">M</div>
    <div class="bn">Mini<em>Botix</em></div>
  </div>

  <nav class="main-nav">
    <a href="index.html">Home</a>
    <a href="courses.html">Courses</a>
    <a href="products.html">Products</a>
    <a href="componentshop.html">Components</a>
    <a href="projects.html" class="active">Projects</a>
    <a href="apps.html">Apps</a>
    <a href="about_us.html">About</a>
    <a href="index.html#contact">Contact</a>
  </nav>

  <div class="nr">
    <div class="cpill">
      <div class="pulse"></div>
      <div class="csw">
        <svg viewBox="0 0 44 44" fill="none">
          <circle cx="22" cy="22" r="19" stroke="rgba(0,180,255,0.18)" stroke-width="1.5"/>
          <circle cx="22" cy="22" r="1.5" fill="var(--cg)"/>
          <line id="nh" x1="22" y1="22" x2="22" y2="12" stroke="var(--txt)" stroke-width="2" stroke-linecap="round"/>
          <line id="nm" x1="22" y1="22" x2="22" y2="9"  stroke="var(--c)"  stroke-width="1.2" stroke-linecap="round"/>
          <line id="ns" x1="22" y1="22" x2="22" y2="6"  stroke="var(--cg)" stroke-width="0.8" stroke-linecap="round"/>
        </svg>
      </div>
      <span id="navClock">00:00:00</span>
    </div>
    <div id="sou"><button class="btn-o" id="openAuth">Sign In</button></div>
    <div id="sui">
      <div class="apill" id="openPS">
        <img id="pAvatar" src="file.svg" alt="">
        <span class="aname" id="pName">User</span>
        <span class="gear">âš™</span>
      </div>
    </div>
    <button class="ham" id="hamBtn" aria-label="Menu"><span></span><span></span><span></span></button>
  </div>
</header>

<div id="mobileNav">
  <a href="index.html" onclick="closeM()">Home</a>
  <a href="courses.html" onclick="closeM()">Courses</a>
  <a href="products.html" onclick="closeM()">Products</a>
  <a href="componentshop.html" onclick="closeM()">Components</a>
  <a href="projects.html" onclick="closeM()">Projects</a>
  <a href="apps.html" onclick="closeM()">Apps</a>
  <a href="about_us.html" onclick="closeM()">About</a>
  <a href="index.html#contact" onclick="closeM()">Contact</a>
</div>

<!-- PAGE HERO -->
<div class="page-hero reveal">
  <div class="con">
    <div class="htag"><span class="hd"></span> MiniBotix Â· Showcase</div>
    <h1>Real-World<br><span class="acc">Projects</span></h1>
    <p>Hardware, software and integrated systems we've built. Explore our work â€” click any project to view full details, technologies, and outcomes.</p>
    <div class="hero-actions">
      <button class="btn-s" style="padding:11px 24px;font-size:13px" id="toGridBtn">View Projects â†’</button>
      <button class="btn-o" style="padding:11px 24px;font-size:13px" id="contactBtn">Collaborate With Us</button>
    </div>
  </div>
</div>

<div class="sep"></div>

<!-- PROJECTS SECTION -->
<section class="section" id="projectsSection">
  <div class="con">
    <div class="reveal">
      <div class="sl2"><span class="sn">01 /</span> Projects</div>
      <h2 class="sh">Our Projects</h2>
      <p class="lead">Filter, search, and open any project for a full detailed view. This is a showcase â€” not a store.</p>
    </div>

    <!-- CONTROLS -->
    <div class="controls-bar reveal d2">
      <div class="search-wrap">
        <input id="searchInput" class="search-input" placeholder="Search projects, tech, featuresâ€¦" aria-label="Search projects">
        <button id="clearSearch" class="clear-btn" title="Clear">âœ•</button>
      </div>
      <select id="categoryFilter" class="filter-select" aria-label="Filter by category">
        <option value="">All Categories</option>
      </select>
      <select id="sortSelect" class="filter-select" aria-label="Sort">
        <option value="new">Newest First</option>
        <option value="old">Oldest First</option>
        <option value="alpha">A â†’ Z</option>
      </select>
      <div class="result-count" id="resultCount">â€” projects</div>
    </div>

    <div class="projects-grid reveal d3" id="projectsGrid"></div>
    <div id="noResults" style="display:none">
      <div class="no-results"><div class="ei">ðŸ”­</div><p>No projects found. Try adjusting your search or filter.</p></div>
    </div>
  </div>
</section>

<!-- FOOTER -->
<footer>
  <div style="display:flex;align-items:center;gap:10px">
    <div class="bm" style="width:28px;height:28px;font-size:12px;border-radius:6px">M</div>
    <div class="finfo">Â© 2025 MiniBotix Â· Learn Â· Build Â· Innovate</div>
  </div>
  <div class="flinks">
    <a href="index.html">Home</a>
    <a href="courses.html">Courses</a>
    <a href="products.html">Products</a>
    <a href="projects.html">Projects</a>
    <a href="index.html#contact">Contact</a>
  </div>
</footer>

<!-- VIEWER MODAL -->
<div id="viewerModal" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
  <div class="viewer-wrap">
    <div class="viewer-img" id="viewerImgWrap">
      <img id="viewerImage" src="" alt="">
    </div>
    <div class="viewer-content">
      <div class="viewer-head">
        <div class="vh-info">
          <h3 id="viewerTitle">Project Title</h3>
          <div class="vh-meta" id="viewerMeta">Category Â· Year</div>
          <div class="vh-cat" id="viewerCat"></div>
        </div>
        <div class="vh-btns">
          <button class="zoom-btn" id="zoomBtn" title="Open image full size">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
          </button>
          <button class="close-btn" id="closeViewerBtn" aria-label="Close">Ã—</button>
        </div>
      </div>
      <div class="viewer-body">
        <div class="vb-desc" id="viewerDesc"></div>
        <div class="vb-tags" id="viewerTags"></div>
      </div>
      <div class="viewer-foot">
        <button class="btn-discuss" id="contactForProject">Discuss This Project â†’</button>
        <button class="btn-assets" id="viewMoreBtn">View Assets â†—</button>
      </div>
    </div>
  </div>
</div>

<!-- AUTH MODAL -->
<div id="authModal" class="modal">
  <div class="mc">
    <div class="mc-head"><h3>Access MiniBotix</h3><button class="mcc" id="authClose">Ã—</button></div>
    <div class="mc-body">
      <div class="tabs">
        <button class="tab on" id="tabEmail">Email</button>
        <button class="tab" id="tabGoogle">Google</button>
      </div>
      <div id="emailView">
        <div id="loginView">
          <div class="fg"><label>Email</label><input id="loginEmail" type="email" placeholder="you@domain.com"></div>
          <div class="fg"><label>Password</label><input id="loginPassword" type="password" placeholder="Password"></div>
          <div class="ma"><button class="btn-s" id="emailSignIn">Sign In</button><button class="btn-o" id="showRegister">Register</button></div>
        </div>
        <div id="registerView" style="display:none">
          <div class="fg"><label>Full Name</label><input id="regName" type="text" placeholder="Your name"></div>
          <div class="fg"><label>Phone</label><input id="regPhone" type="tel" placeholder="+91 9XXXXXXXXX"></div>
          <div class="fg"><label>Email</label><input id="regEmail" type="email" placeholder="you@domain.com"></div>
          <div class="fg"><label>Password</label><input id="regPass" type="password" placeholder="Min 6 characters"></div>
          <div class="fg"><label>Confirm</label><input id="regPass2" type="password" placeholder="Confirm password"></div>
          <div class="ma"><button class="btn-s" id="createAccount">Create Account</button><button class="btn-o" id="showLogin">Sign In</button></div>
        </div>
      </div>
      <div id="googleView" style="display:none;padding-top:8px">
        <button id="googleSignIn" class="btn-s" style="width:100%;padding:13px;font-size:14px;display:flex;align-items:center;justify-content:center;gap:10px">
          <svg width="16" height="16" viewBox="0 0 48 48"><path fill="#FFC107" d="M43.6 20.1H42V20H24v8h11.3C33.6 32.7 29.2 36 24 36c-6.6 0-12-5.4-12-12s5.4-12 12-12c3.1 0 5.9 1.1 8 3l5.7-5.7C34.5 6.5 29.5 4 24 4 12.9 4 4 12.9 4 24s8.9 20 20 20 20-8.9 20-20c0-1.3-.1-2.6-.4-3.9z"/><path fill="#FF3D00" d="M6.3 14.7l6.6 4.8C14.6 16.1 19 13 24 13c3.1 0 5.9 1.1 8 3l5.7-5.7C34.5 6.5 29.5 4 24 4 16.3 4 9.7 8.3 6.3 14.7z"/><path fill="#4CAF50" d="M24 44c5.2 0 9.9-2 13.4-5.2l-6.2-5.2C29.2 35.3 26.7 36 24 36c-5.2 0-9.5-3.3-11.2-7.9L6.1 33.4C9.5 39.6 16.2 44 24 44z"/><path fill="#1976D2" d="M43.6 20.1H42V20H24v8h11.3c-.8 2.3-2.3 4.2-4.3 5.6l6.2 5.2C42.3 35.5 44 30.1 44 24c0-1.3-.1-2.6-.4-3.9z"/></svg>
          Continue with Google
        </button>
      </div>
      <p class="mnote">Your data is stored securely in Firestore.</p>
    </div>
  </div>
</div>

<!-- PROFILE MODAL -->
<div id="profileModal" class="modal">
  <div class="mc pmc">
    <div class="mc-head"><h3>Profile Settings</h3><button class="mcc" id="profileClose">Ã—</button></div>
    <div class="mc-body">
      <div class="fg"><label>Name</label><input id="pfName" type="text"></div>
      <div class="fg"><label>Phone</label><input id="pfPhone" type="tel"></div>
      <div class="fg"><label>Delivery Area</label><input id="pfArea" type="text"></div>
      <div class="ma"><button class="btn-s" id="saveProfile">Save Changes</button><button class="btn-o" id="logoutBtn">Logout</button></div>
    </div>
  </div>
</div>

<script>
/* RAIN */
(function(){
  const cv=document.getElementById('rain'),ctx=cv.getContext('2d');
  let W,H,dr=[];
  function rs(){W=cv.width=innerWidth;H=cv.height=innerHeight;init()}
  function init(){dr=[];for(let i=0;i<180;i++){dr.push({x:Math.random()*W,y:Math.random()*H-H,len:Math.random()*35+10,sp:Math.random()*3.5+2,sw:Math.random()*1.2+0.3,a:0.04+Math.random()*0.09,drift:Math.random()*0.5-0.25,ph:Math.random()*Math.PI*2})}}
  function draw(){
    ctx.clearRect(0,0,W,H);
    dr.forEach(d=>{
      const g=ctx.createLinearGradient(d.x,d.y,d.x+d.drift*8,d.y+d.len);
      g.addColorStop(0,'rgba(0,180,255,0)');g.addColorStop(0.5,`rgba(0,190,255,${d.a})`);g.addColorStop(1,'rgba(100,220,255,0)');
      ctx.beginPath();ctx.strokeStyle=g;ctx.lineWidth=d.sw;
      ctx.moveTo(d.x,d.y);ctx.lineTo(d.x+d.drift*4,d.y+d.len);ctx.stroke();
      d.y+=d.sp;d.x+=Math.sin(d.y*0.012+d.ph)*0.4;
      if(d.y>H+50){d.y=-50;d.x=Math.random()*W}
      d.a=0.04+Math.random()*0.08;
    });
    requestAnimationFrame(draw);
  }
  window.addEventListener('resize',rs);rs();draw();
})();

/* CLOCK */
function rpt(cx,cy,ang,len){return{x:cx+Math.sin(ang)*len,y:cy-Math.cos(ang)*len}}
function setHand(id,ang,cx,cy,len){const el=document.getElementById(id);if(!el)return;const p=rpt(cx,cy,ang,len);el.setAttribute('x2',p.x.toFixed(2));el.setAttribute('y2',p.y.toFixed(2))}
function updateClock(){
  const n=new Date(),h=n.getHours(),m=n.getMinutes(),s=n.getSeconds(),ms=n.getMilliseconds();
  const sa=(s+ms/1000)*(Math.PI*2/60),ma=(m+s/60)*(Math.PI*2/60),ha=(h%12+m/60)*(Math.PI*2/12);
  setHand('nh',ha,22,22,10);setHand('nm',ma,22,22,13);setHand('ns',sa,22,22,15);
  const pad=v=>String(v).padStart(2,'0');
  document.getElementById('navClock').textContent=`${pad(h)}:${pad(m)}:${pad(s)}`;
}
setInterval(updateClock,80);updateClock();

/* SCROLL */
window.addEventListener('scroll',()=>document.getElementById('hdr').classList.toggle('scrolled',scrollY>40));
const io=new IntersectionObserver(en=>{en.forEach(e=>{if(e.isIntersecting){e.target.classList.add('in');io.unobserve(e.target)}})},{threshold:0.08});
document.querySelectorAll('.reveal').forEach(el=>io.observe(el));

/* MOBILE NAV */
document.getElementById('hamBtn').addEventListener('click',()=>document.getElementById('mobileNav').classList.toggle('open'));
function closeM(){document.getElementById('mobileNav').classList.remove('open')}

/* TOAST */
function toast(msg,err){
  const t=document.createElement('div');t.className='toast';t.textContent=msg;
  t.style.background=err?'var(--cr)':'var(--cg)';t.style.color=err?'#fff':'#010e07';
  document.body.appendChild(t);
  setTimeout(()=>{t.style.transition='all .4s';t.style.opacity='0';t.style.transform='translateX(-50%) translateY(10px)'},2400);
  setTimeout(()=>t.remove(),2800);
}

function esc(s){return String(s||'').replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;')}

/* MODALS */
const AM=document.getElementById('authModal'),PM=document.getElementById('profileModal'),VM=document.getElementById('viewerModal');
document.getElementById('openAuth').addEventListener('click',()=>AM.classList.add('open'));
document.getElementById('authClose').addEventListener('click',()=>AM.classList.remove('open'));
document.getElementById('profileClose').addEventListener('click',()=>PM.classList.remove('open'));
document.getElementById('openPS').addEventListener('click',()=>PM.classList.add('open'));
document.getElementById('closeViewerBtn').addEventListener('click',closeViewer);
window.addEventListener('click',e=>{
  if(e.target===AM)AM.classList.remove('open');
  if(e.target===PM)PM.classList.remove('open');
  if(e.target===VM)closeViewer();
});
window.addEventListener('keydown',e=>{
  if(e.key==='Escape'){closeViewer();AM.classList.remove('open')}
});

/* AUTH TABS */
const tE=document.getElementById('tabEmail'),tG=document.getElementById('tabGoogle');
const eV=document.getElementById('emailView'),gV=document.getElementById('googleView');
tE.addEventListener('click',()=>{eV.style.display='block';gV.style.display='none';tE.classList.add('on');tG.classList.remove('on')});
tG.addEventListener('click',()=>{eV.style.display='none';gV.style.display='block';tG.classList.add('on');tE.classList.remove('on')});
document.getElementById('showRegister').addEventListener('click',()=>{document.getElementById('loginView').style.display='none';document.getElementById('registerView').style.display='block'});
document.getElementById('showLogin').addEventListener('click',()=>{document.getElementById('registerView').style.display='none';document.getElementById('loginView').style.display='block'});

/* HERO BTNS */
document.getElementById('toGridBtn').addEventListener('click',()=>document.getElementById('projectsSection').scrollIntoView({behavior:'smooth'}));
document.getElementById('contactBtn').addEventListener('click',()=>location.href='index.html#contact');

/* ===== PROJECTS LOGIC ===== */
let projects=[],filtered=[],activeProject=null;

async function loadProjects(){
  try{
    const res=await fetch('projects.json',{cache:'no-store'});
    if(!res.ok)throw new Error(res.status);
    const data=await res.json();
    if(!Array.isArray(data))throw new Error('Not an array');
    projects=data.map((p,i)=>({
      id:p.id||('proj_'+(i+1)),
      title:p.title||p.name||('Project '+(i+1)),
      short:p.short||p.subtitle||(p.description||'').slice(0,110),
      description:p.description||p.desc||'',
      image:p.image||p.img||p.imageUrl||'',
      category:p.category||(Array.isArray(p.tags)&&p.tags[0])||'General',
      tags:Array.isArray(p.tags)?p.tags:(p.tags?String(p.tags).split(',').map(s=>s.trim()):[]),
      year:p.year||p.date||'',
      team:p.team||p.authors||'MiniBotix',
      assetsUrl:p.assetsUrl||p.link||''
    }));
  }catch(e){
    console.warn(e);
    projects=[{id:'_err',title:'projects.json not found',short:'Please ensure projects.json is present.',description:'Ensure projects.json is valid JSON array next to this HTML file.',image:'',category:'General',tags:[],year:'',team:'MiniBotix',assetsUrl:''}];
  }
  populateCategories();
  applyFilters();
}

function populateCategories(){
  const cats=[...new Set(projects.map(p=>p.category||'General'))].sort();
  const sel=document.getElementById('categoryFilter');
  sel.innerHTML='<option value="">All Categories</option>';
  cats.forEach(c=>{const o=document.createElement('option');o.value=c;o.textContent=c;sel.appendChild(o)});
}

function applyFilters(){
  const q=(document.getElementById('searchInput').value||'').trim().toLowerCase();
  const cat=document.getElementById('categoryFilter').value;
  const sort=document.getElementById('sortSelect').value;
  filtered=projects.filter(p=>{
    if(cat&&p.category!==cat)return false;
    if(!q)return true;
    return(p.title+' '+(p.short||'')+' '+(p.description||'')+' '+(p.tags||[]).join(' ')).toLowerCase().includes(q);
  });
  if(sort==='alpha')filtered.sort((a,b)=>a.title.localeCompare(b.title));
  else if(sort==='old')filtered.sort((a,b)=>(a.year||'').localeCompare(b.year||''));
  else filtered.sort((a,b)=>(b.year||'').localeCompare(a.year||''));
  renderGrid();
}

function debounce(fn,ms=250){let t;return(...a)=>{clearTimeout(t);t=setTimeout(()=>fn(...a),ms)}}

document.getElementById('searchInput').addEventListener('input',debounce(applyFilters));
document.getElementById('clearSearch').addEventListener('click',()=>{document.getElementById('searchInput').value='';applyFilters()});
document.getElementById('categoryFilter').addEventListener('change',applyFilters);
document.getElementById('sortSelect').addEventListener('change',applyFilters);

function renderGrid(){
  const grid=document.getElementById('projectsGrid');
  const nr=document.getElementById('noResults');
  const rc=document.getElementById('resultCount');
  grid.innerHTML='';
  if(!filtered.length){nr.style.display='block';rc.textContent='0 projects';return}
  nr.style.display='none';
  rc.textContent=filtered.length+(filtered.length===1?' project':' projects');
  filtered.forEach(p=>{
    const el=document.createElement('article');
    el.className='proj-card';
    el.setAttribute('tabindex','0');
    el.setAttribute('role','button');
    el.dataset.id=p.id;
    const tags=(p.tags||[]).slice(0,4).map(t=>`<span class="pc-tag">${esc(t)}</span>`).join('');
    el.innerHTML=`
      <div class="pc-thumb">
        ${p.image
          ?`<img src="${esc(p.image)}" alt="${esc(p.title)}" onerror="this.parentNode.innerHTML='<span class=pc-placeholder>ðŸ”¬</span>'">`
          :'<span class="pc-placeholder">ðŸ”¬</span>'}
        ${p.category?`<div class="pc-cat-badge">${esc(p.category)}</div>`:''}
      </div>
      <div class="pc-body">
        <div class="pc-meta">${esc(p.year||'')}</div>
        <div class="pc-title">${esc(p.title)}</div>
        <div class="pc-desc">${esc(p.short||p.description||'')}</div>
        ${tags?`<div class="pc-tags">${tags}</div>`:''}
        <span class="pc-team">${esc(p.team||'MiniBotix')}</span>
      </div>
      <div class="pc-actions">
        <button class="btn-view-proj" data-id="${esc(p.id)}">View Project</button>
        <button class="btn-share-proj" data-id="${esc(p.id)}" title="Share">
          <svg width="13" height="13" viewBox="0 0 24 24" fill="currentColor"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92c0-1.61-1.31-2.92-2.92-2.92z"/></svg>
        </button>
      </div>`;
    el.querySelector('.btn-view-proj').addEventListener('click',ev=>{ev.stopPropagation();openViewer(p.id)});
    el.querySelector('.btn-share-proj').addEventListener('click',ev=>{ev.stopPropagation();shareProject(p.id)});
    el.addEventListener('click',()=>openViewer(p.id));
    el.addEventListener('keydown',e=>{if(e.key==='Enter'||e.key===' '){e.preventDefault();openViewer(p.id)}});
    grid.appendChild(el);
  });
}

/* VIEWER */
function openViewer(id){
  const p=projects.find(x=>x.id===id);if(!p){toast('Project not found',true);return}
  activeProject=p;
  const img=document.getElementById('viewerImage');
  const wrap=document.getElementById('viewerImgWrap');
  if(p.image){img.src=p.image;img.alt=p.title;img.style.display='block';wrap.querySelector('.vi-placeholder')&&wrap.querySelector('.vi-placeholder').remove()}
  else{img.style.display='none';if(!wrap.querySelector('.vi-placeholder')){const sp=document.createElement('span');sp.className='vi-placeholder';sp.textContent='ðŸ”¬';wrap.appendChild(sp)}}
  document.getElementById('viewerTitle').textContent=p.title;
  document.getElementById('viewerMeta').textContent=[p.year,p.team].filter(Boolean).join(' Â· ');
  document.getElementById('viewerCat').textContent=p.category||'General';
  document.getElementById('viewerDesc').textContent=p.description||p.short||'No description available.';
  const tagsEl=document.getElementById('viewerTags');
  tagsEl.innerHTML=(p.tags||[]).map(t=>`<span class="vb-tag">${esc(t)}</span>`).join('');
  document.getElementById('contactForProject').onclick=()=>{closeViewer();location.href='index.html#contact'};
  document.getElementById('viewMoreBtn').onclick=()=>{
    if(p.assetsUrl)window.open(p.assetsUrl,'_blank','noopener');
    else toast('No external assets for this project',true);
  };
  document.getElementById('zoomBtn').onclick=()=>{
    if(p.image)window.open(p.image,'_blank','noopener');
    else toast('No image to open',true);
  };
  VM.classList.add('open');VM.setAttribute('aria-hidden','false');
  setTimeout(()=>document.getElementById('closeViewerBtn').focus(),100);
}

function closeViewer(){VM.classList.remove('open');VM.setAttribute('aria-hidden','true');activeProject=null}

function shareProject(id){
  const p=projects.find(x=>x.id===id);if(!p)return;
  const url=location.origin+location.pathname+'#project='+encodeURIComponent(p.id);
  if(navigator.share){navigator.share({title:p.title,text:p.short||p.description,url}).catch(()=>copyUrl(url))}
  else copyUrl(url);
}
function copyUrl(url){navigator.clipboard.writeText(url).then(()=>toast('Link copied!')).catch(()=>toast('Copy failed',true))}

function handleDeepLink(){
  const hash=location.hash||'';
  if(hash.includes('project=')){const id=decodeURIComponent(hash.split('project=')[1]||'').trim();if(id)openViewer(id);return}
  const params=new URLSearchParams(location.search);
  if(params.has('project'))openViewer(params.get('project'));
}

window.addEventListener('load',()=>loadProjects().then(handleDeepLink));
</script>

<!-- FIREBASE -->
<script type="module">
import{initializeApp}from"https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";
import{getAuth,GoogleAuthProvider,signInWithPopup,createUserWithEmailAndPassword,signInWithEmailAndPassword,signOut,onAuthStateChanged,updateProfile}from"https://www.gstatic.com/firebasejs/12.2.1/firebase-auth.js";
import{getFirestore,doc,setDoc,getDoc,updateDoc,serverTimestamp}from"https://www.gstatic.com/firebasejs/12.2.1/firebase-firestore.js";
const app=initializeApp({apiKey:"AIzaSyDWmliHHP7UR1pmM6CNjY6o_NvF-hYJWpY",authDomain:"minibotix-a1b9a.firebaseapp.com",projectId:"minibotix-a1b9a",storageBucket:"minibotix-a1b9a.firebasestorage.app",messagingSenderId:"771169717230",appId:"1:771169717230:web:44848d73e548d0e0f8dcff"});
const auth=getAuth(app),db=getFirestore(app),gp=new GoogleAuthProvider();
const g=id=>document.getElementById(id);
g('googleSignIn').addEventListener('click',async()=>{try{const r=await signInWithPopup(auth,gp);await setDoc(doc(db,'users',r.user.uid),{name:r.user.displayName,email:r.user.email,photoURL:r.user.photoURL,lastSignIn:serverTimestamp()},{merge:true});document.getElementById('authModal').classList.remove('open');toast('Signed in with Google')}catch(e){toast('Google sign-in failed',true)}});
g('emailSignIn').addEventListener('click',async()=>{try{await signInWithEmailAndPassword(auth,g('loginEmail').value.trim(),g('loginPassword').value);document.getElementById('authModal').classList.remove('open');toast('Signed in')}catch(e){toast('Sign in failed: '+e.message,true)}});
g('createAccount').addEventListener('click',async()=>{const name=g('regName').value.trim(),phone=g('regPhone').value.trim(),email=g('regEmail').value.trim(),pass=g('regPass').value,pass2=g('regPass2').value;if(pass.length<6){toast('Password min 6 chars',true);return}if(pass!==pass2){toast('Passwords do not match',true);return}try{const uc=await createUserWithEmailAndPassword(auth,email,pass);await updateProfile(uc.user,{displayName:name});await setDoc(doc(db,'users',uc.user.uid),{name,phone,area:'',email,createdAt:serverTimestamp()});document.getElementById('authModal').classList.remove('open');toast('Account created!')}catch(e){toast('Register failed: '+e.message,true)}});
onAuthStateChanged(auth,async user=>{if(user){const ref=doc(db,'users',user.uid),snap=await getDoc(ref);if(!snap.exists())await setDoc(ref,{name:user.displayName||'',phone:'',area:'',email:user.email||'',createdAt:serverTimestamp()});const ud=(await getDoc(ref)).data();g('sou').style.display='none';g('sui').style.display='block';g('pName').textContent=(ud.name||user.email||'User').split(' ')[0];g('pAvatar').src=user.photoURL||'file.svg';g('pfName').value=ud.name||'';g('pfPhone').value=ud.phone||'';g('pfArea').value=ud.area||''}else{g('sou').style.display='block';g('sui').style.display='none'}});
g('saveProfile').addEventListener('click',async()=>{const auth2=getAuth();const cu=auth2.currentUser;if(!cu){toast('Not signed in',true);return}const name=g('pfName').value.trim(),phone=g('pfPhone').value.trim(),area=g('pfArea').value.trim();try{await updateDoc(doc(db,'users',cu.uid),{name,phone,area,updatedAt:serverTimestamp()});await updateProfile(cu,{displayName:name});g('pName').textContent=name.split(' ')[0];document.getElementById('profileModal').classList.remove('open');toast('Profile saved')}catch(e){toast('Save failed: '+e.message,true)}});
g('logoutBtn').addEventListener('click',async()=>{await signOut(getAuth());document.getElementById('profileModal').classList.remove('open');toast('Signed out')});
</script>
</body>
</html>
