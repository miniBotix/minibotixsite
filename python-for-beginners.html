<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Python Beginner Course</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #0d1117;
      color: #e6edf3;
    }
    header {
      background: #161b22;
      padding: 15px;
      text-align: center;
      font-size: 20px;
      font-weight: bold;
      color: #58a6ff;
    }
    .container {
      max-width: 1000px;
      margin: auto;
      padding: 20px;
    }
    .stage {
      display: none;
      margin: 20px 0;
      padding: 20px;
      border: 1px solid #30363d;
      border-radius: 10px;
      background: #161b22;
    }
    .active {
      display: block;
    }
    h2 {
      color: #79c0ff;
    }
    .code-box {
      background: #0d1117;
      border: 1px solid #30363d;
      border-radius: 6px;
      padding: 10px;
      margin: 10px 0;
    }
    textarea {
      width: 100%;
      height: 120px;
      background: #0d1117;
      color: #e6edf3;
      border: 1px solid #30363d;
      border-radius: 6px;
      padding: 10px;
      font-family: monospace;
    }
    .output-box {
      background: #161b22;
      border: 1px solid #30363d;
      border-radius: 6px;
      padding: 10px;
      margin-top: 10px;
      min-height: 50px;
      white-space: pre-wrap;
    }
    button {
      background: #238636;
      border: none;
      padding: 10px 20px;
      color: white;
      font-size: 14px;
      cursor: pointer;
      border-radius: 6px;
      margin-top: 10px;
    }
    button:hover {
      background: #2ea043;
    }
    .quiz {
      margin-top: 20px;
    }
    .quiz button {
      background: #1f6feb;
    }
    .progress {
      margin: 20px 0;
      padding: 10px;
      background: #21262d;
      border-radius: 6px;
    }
  </style>
  <script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>
</head>
<body>
  <header>
    <button onclick="window.location.href='courses.html'" style="float:left;background:#1f6feb;">‚¨Ö Back</button>
    Python Beginner Course
    <span id="user-info" style="float:right;color:#8b949e;"></span>
  </header>

  <div class="container">
    <div class="progress">
      <strong>Course Progress:</strong> <span id="progress-status">Loading...</span>
    </div>

    <!-- Stage 1 -->
    <div class="stage active" id="stage-1">
      <h2>Stage 1: Introduction to Python</h2>
      <p>Python is a high-level, interpreted programming language known for simplicity and readability.</p>
      <div class="code-box">
        <textarea id="code-1">print("Hello, Python!")</textarea>
        <button onclick="runCode('code-1','output-1')">‚ñ∂ Run</button>
        <div class="output-box" id="output-1"></div>
      </div>

      <div class="quiz">
        <h3>Quick Quiz</h3>
        <p>Q1: Python is ______ language?</p>
        <button onclick="checkAnswer(1,'interpreted')">Interpreted</button>
        <button onclick="checkAnswer(1,'compiled')">Compiled</button>
        <button onclick="checkAnswer(1,'binary')">Binary</button>
        <p id="quiz-result-1"></p>
      </div>

      <button onclick="completeStage(1)">‚úÖ Complete Stage 1</button>
    </div>

    <!-- Stage 2 -->
    <div class="stage" id="stage-2">
      <h2>Stage 2: Variables & Data Types</h2>
      <p>Python supports different data types: int, float, str, bool, list, tuple, dict.</p>
      <div class="code-box">
        <textarea id="code-2">name = "Alice"\nage = 20\nprint("Name:", name)\nprint("Age:", age)</textarea>
        <button onclick="runCode('code-2','output-2')">‚ñ∂ Run</button>
        <div class="output-box" id="output-2"></div>
      </div>

      <div class="quiz">
        <h3>Quick Quiz</h3>
        <p>Q2: Which type is <code>3.14</code>?</p>
        <button onclick="checkAnswer(2,'float')">Float</button>
        <button onclick="checkAnswer(2,'int')">Int</button>
        <button onclick="checkAnswer(2,'str')">String</button>
        <p id="quiz-result-2"></p>
      </div>

      <button onclick="completeStage(2)">‚úÖ Complete Stage 2</button>
    </div>

    <!-- Stage 3 -->
    <div class="stage" id="stage-3">
      <h2>Stage 3: Control Flow</h2>
      <p>Python supports conditional statements using <code>if</code>, <code>elif</code>, and <code>else</code>.</p>
      <div class="code-box">
        <textarea id="code-3">x = 10\nif x > 5:\n    print("x is greater than 5")\nelse:\n    print("x is 5 or less")</textarea>
        <button onclick="runCode('code-3','output-3')">‚ñ∂ Run</button>
        <div class="output-box" id="output-3"></div>
      </div>

      <div class="quiz">
        <h3>Quick Quiz</h3>
        <p>Q3: What will be printed if x = 2?</p>
        <button onclick="checkAnswer(3,'x is greater than 5')">x is greater than 5</button>
        <button onclick="checkAnswer(3,'x is 5 or less')">x is 5 or less</button>
        <p id="quiz-result-3"></p>
      </div>

      <button onclick="completeStage(3)">‚úÖ Complete Stage 3</button>
    </div>
  </div>

  <script>
    const APP_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxApgefcqGK1KLybeyHiVlnbNKDM9oXL0d7-c_MyIsMiv3qvlj6-Og1RTsOU5KrSFGl/exec";
    let pyodideReady = loadPyodide();

    // Run Python code
    async function runCode(codeId, outputId) {
      const code = document.getElementById(codeId).value;
      const outputBox = document.getElementById(outputId);
      try {
        let pyodide = await pyodideReady;
        let result = await pyodide.runPythonAsync(code);
        outputBox.textContent = result !== undefined ? result : "Executed successfully.";
      } catch (err) {
        outputBox.textContent = "Error: " + err;
      }
    }

    // Quiz check
    function checkAnswer(stage, answer) {
      let correct = {
        1: 'interpreted',
        2: 'float',
        3: 'x is 5 or less'
      };
      let resultBox = document.getElementById(`quiz-result-${stage}`);
      if (answer === correct[stage]) {
        resultBox.textContent = "‚úÖ Correct!";
        resultBox.style.color = "lightgreen";
      } else {
        resultBox.textContent = "‚ùå Wrong, try again.";
        resultBox.style.color = "red";
      }
    }

    // Save progress
    async function completeStage(stage) {
      let email = localStorage.getItem("userEmail") || "guest@example.com";
      let name = localStorage.getItem("userName") || "Guest";
      let percentage = 100; // Example, can compute quiz score

      let payload = {
        name: name,
        email: email,
        course_name: "Python Beginner",
        stage_no: stage,
        percentage: percentage
      };

      await fetch(APP_SCRIPT_URL, {
        method: "POST",
        body: JSON.stringify(payload)
      });

      document.getElementById(`stage-${stage}`).classList.remove("active");
      let next = document.getElementById(`stage-${stage + 1}`);
      if (next) {
        next.classList.add("active");
      } else {
        document.getElementById("progress-status").textContent = "üéâ Course Completed!";
      }
    }
  </script>
</body>
</html>
    <!-- ================== STAGE 4 ================== -->
    <section class="stage" id="stage-4">
        <h2>Stage 4: Functions</h2>
        <p>Functions let us reuse code by grouping statements. Functions can accept parameters and return values.</p>
        <pre><code>def greet(name):
    return "Hello " + name

print(greet("Alice"))</code></pre>

        <textarea id="editor-4">def add(a, b):
    return a + b

print(add(5, 3))</textarea>
        <button onclick="runCode(4)">Run Code</button>
        <pre id="output-4" class="output"></pre>

        <button onclick="startQuiz(4)">Start Quiz</button>
        <div id="quiz-4" class="quiz hidden">
            <p>1. Which keyword is used to define a function in Python?</p>
            <input type="radio" name="q4-1" value="function"> function<br>
            <input type="radio" name="q4-1" value="def"> def<br>
            <input type="radio" name="q4-1" value="func"> func<br>

            <p>2. What will <code>return</code> do?</p>
            <input type="radio" name="q4-2" value="stop"> Stop the function<br>
            <input type="radio" name="q4-2" value="give"> Give a value back<br>
            <input type="radio" name="q4-2" value="loop"> Loop<br>

            <button onclick="finishQuiz(4)">Finish Quiz</button>
            <p id="score-4"></p>
        </div>
    </section>

    <!-- ================== STAGE 5 ================== -->
    <section class="stage" id="stage-5">
        <h2>Stage 5: Lists</h2>
        <p>Lists are ordered collections of items. You can add, remove, and iterate over them.</p>
        <pre><code>fruits = ["apple", "banana", "cherry"]
fruits.append("orange")
print(fruits)</code></pre>

        <textarea id="editor-5">numbers = [1, 2, 3]
numbers.append(4)
print(numbers)</textarea>
        <button onclick="runCode(5)">Run Code</button>
        <pre id="output-5" class="output"></pre>

        <button onclick="startQuiz(5)">Start Quiz</button>
        <div id="quiz-5" class="quiz hidden">
            <p>1. Which method adds an element to a list?</p>
            <input type="radio" name="q5-1" value="add"> add<br>
            <input type="radio" name="q5-1" value="append"> append<br>
            <input type="radio" name="q5-1" value="insert"> insert<br>

            <p>2. What is the index of the first element in a Python list?</p>
            <input type="radio" name="q5-2" value="0"> 0<br>
            <input type="radio" name="q5-2" value="1"> 1<br>
            <input type="radio" name="q5-2" value="-1"> -1<br>

            <button onclick="finishQuiz(5)">Finish Quiz</button>
            <p id="score-5"></p>
        </div>
    </section>

    <!-- ================== STAGE 6 ================== -->
    <section class="stage" id="stage-6">
        <h2>Stage 6: Dictionaries</h2>
        <p>Dictionaries store data as key-value pairs.</p>
        <pre><code>student = {"name": "Alice", "age": 21}
print(student["name"])</code></pre>

        <textarea id="editor-6">person = {"name": "John", "city": "London"}
print(person["city"])</textarea>
        <button onclick="runCode(6)">Run Code</button>
        <pre id="output-6" class="output"></pre>

        <button onclick="startQuiz(6)">Start Quiz</button>
        <div id="quiz-6" class="quiz hidden">
            <p>1. What are Python dictionaries enclosed with?</p>
            <input type="radio" name="q6-1" value="[]"> []<br>
            <input type="radio" name="q6-1" value="{}"> {}<br>
            <input type="radio" name="q6-1" value="()"> ()<br>

            <p>2. What will <code>student["age"]</code> return?</p>
            <input type="radio" name="q6-2" value="key"> The key<br>
            <input type="radio" name="q6-2" value="value"> The value<br>
            <input type="radio" name="q6-2" value="error"> Error<br>

            <button onclick="finishQuiz(6)">Finish Quiz</button>
            <p id="score-6"></p>
        </div>
    </section>

    <!-- ================== STAGE 7 ================== -->
    <section class="stage" id="stage-7">
        <h2>Stage 7: File Handling</h2>
        <p>Python can read and write files using <code>open()</code>.</p>
        <pre><code>f = open("test.txt", "w")
f.write("Hello file")
f.close()</code></pre>

        <textarea id="editor-7">with open("example.txt", "w") as f:
    f.write("Learning file handling!")</textarea>
        <button onclick="runCode(7)">Run Code</button>
        <pre id="output-7" class="output"></pre>

        <button onclick="startQuiz(7)">Start Quiz</button>
        <div id="quiz-7" class="quiz hidden">
            <p>1. Which mode is used to read a file?</p>
            <input type="radio" name="q7-1" value="w"> w<br>
            <input type="radio" name="q7-1" value="r"> r<br>
            <input type="radio" name="q7-1" value="a"> a<br>

            <p>2. What does <code>with open()</code> do?</p>
            <input type="radio" name="q7-2" value="close"> Automatically closes file<br>
            <input type="radio" name="q7-2" value="error"> Raises error<br>
            <input type="radio" name="q7-2" value="print"> Prints file<br>

            <button onclick="finishQuiz(7)">Finish Quiz</button>
            <p id="score-7"></p>
        </div>
    </section>
    <!-- ================== STAGE 8 ================== -->
    <section class="stage" id="stage-8">
        <h2>Stage 8: Object-Oriented Programming (OOP)</h2>
        <p>OOP allows us to create classes and objects. Classes define the blueprint and objects are instances of them.</p>
        <pre><code>class Person:
    def __init__(self, name):
        self.name = name

    def greet(self):
        return "Hello, " + self.name

p = Person("Alice")
print(p.greet())</code></pre>

        <textarea id="editor-8">class Dog:
    def __init__(self, name):
        self.name = name

    def bark(self):
        return self.name + " says Woof!"

d = Dog("Buddy")
print(d.bark())</textarea>
        <button onclick="runCode(8)">Run Code</button>
        <pre id="output-8" class="output"></pre>

        <button onclick="startQuiz(8)">Start Quiz</button>
        <div id="quiz-8" class="quiz hidden">
            <p>1. What keyword is used to define a class?</p>
            <input type="radio" name="q8-1" value="class"> class<br>
            <input type="radio" name="q8-1" value="object"> object<br>
            <input type="radio" name="q8-1" value="def"> def<br>

            <p>2. What is <code>self</code> in a class method?</p>
            <input type="radio" name="q8-2" value="instance"> Reference to the object<br>
            <input type="radio" name="q8-2" value="class"> The class itself<br>
            <input type="radio" name="q8-2" value="none"> Nothing<br>

            <button onclick="finishQuiz(8)">Finish Quiz</button>
            <p id="score-8"></p>
        </div>
    </section>

    <!-- ================== STAGE 9 ================== -->
    <section class="stage" id="stage-9">
        <h2>Stage 9: Modules and Libraries</h2>
        <p>Python has a rich ecosystem of libraries. You can import and use them easily.</p>
        <pre><code>import math
print(math.sqrt(16))</code></pre>

        <textarea id="editor-9">import random
print(random.randint(1, 10))</textarea>
        <button onclick="runCode(9)">Run Code</button>
        <pre id="output-9" class="output"></pre>

        <button onclick="startQuiz(9)">Start Quiz</button>
        <div id="quiz-9" class="quiz hidden">
            <p>1. Which keyword is used to include a library?</p>
            <input type="radio" name="q9-1" value="import"> import<br>
            <input type="radio" name="q9-1" value="include"> include<br>
            <input type="radio" name="q9-1" value="require"> require<br>

            <p>2. Which library is used for math functions?</p>
            <input type="radio" name="q9-2" value="numpy"> numpy<br>
            <input type="radio" name="q9-2" value="math"> math<br>
            <input type="radio" name="q9-2" value="os"> os<br>

            <button onclick="finishQuiz(9)">Finish Quiz</button>
            <p id="score-9"></p>
        </div>
    </section>

    <!-- ================== STAGE 10 ================== -->
    <section class="stage" id="stage-10">
        <h2>Stage 10: Advanced Topics & Final Project</h2>
        <p>Now you are ready for advanced concepts like decorators, generators, and working with APIs.</p>
        <pre><code>def decorator(func):
    def wrapper():
        print("Before function")
        func()
        print("After function")
    return wrapper

@decorator
def say_hello():
    print("Hello!")

say_hello()</code></pre>

        <textarea id="editor-10">def squares(n):
    for i in range(n):
        yield i*i

for num in squares(5):
    print(num)</textarea>
        <button onclick="runCode(10)">Run Code</button>
        <pre id="output-10" class="output"></pre>

        <button onclick="startQuiz(10)">Start Quiz</button>
        <div id="quiz-10" class="quiz hidden">
            <p>1. What does <code>yield</code> do?</p>
            <input type="radio" name="q10-1" value="return"> Returns a value once<br>
            <input type="radio" name="q10-1" value="generator"> Produces a generator<br>
            <input type="radio" name="q10-1" value="stop"> Stops execution<br>

            <p>2. Which symbol is used for decorators?</p>
            <input type="radio" name="q10-2" value="@">@<br>
            <input type="radio" name="q10-2" value="#"> #<br>
            <input type="radio" name="q10-2" value="&">&<br>

            <button onclick="finishQuiz(10)">Finish Quiz</button>
            <p id="score-10"></p>
        </div>
    </section>

    <!-- ================== COMPLETION ================== -->
    <section class="stage" id="completion">
        <h2>üéâ Congratulations!</h2>
        <p>You have completed the Python Programming Course. Your progress has been saved.</p>
        <p>Check Google Sheet for your results.</p>
    </section>

    <!-- ================== JAVASCRIPT ================== -->
    <script src="https://cdn.jsdelivr.net/pyodide/v0.25.0/full/pyodide.js"></script>
    <script>
        let pyodideReady = loadPyodide();

        // Run Python code
        async function runCode(stage) {
            const code = document.getElementById(`editor-${stage}`).value;
            const outputEl = document.getElementById(`output-${stage}`);
            outputEl.textContent = "Running...";
            try {
                const pyodide = await pyodideReady;
                let result = await pyodide.runPythonAsync(code);
                outputEl.textContent = result !== undefined ? result : "(no output)";
            } catch (err) {
                outputEl.textContent = "Error: " + err;
            }
        }

        // Start quiz
        function startQuiz(stage) {
            document.getElementById(`quiz-${stage}`).classList.remove("hidden");
        }

        // Finish quiz and save
        async function finishQuiz(stage) {
            const quizDiv = document.getElementById(`quiz-${stage}`);
            const radios = quizDiv.querySelectorAll("input[type=radio]");
            let correct = 0, total = 0;

            radios.forEach(r => {
                if (r.checked) {
                    total++;
                    if (r.value === getCorrectAnswer(stage, r.name)) correct++;
                }
            });

            const percentage = Math.round((correct / (radios.length / 2)) * 100);
            document.getElementById(`score-${stage}`).innerText = 
                `You scored ${percentage}%`;

            if (percentage >= 50) {
                await saveProgress(stage, percentage);
                unlockNextStage(stage);
            } else {
                alert("Score too low. Please retake the quiz.");
            }
        }

        // Correct answers
        function getCorrectAnswer(stage, qname) {
            const answers = {
                "q4-1":"def","q4-2":"give",
                "q5-1":"append","q5-2":"0",
                "q6-1":"{}","q6-2":"value",
                "q7-1":"r","q7-2":"close",
                "q8-1":"class","q8-2":"instance",
                "q9-1":"import","q9-2":"math",
                "q10-1":"generator","q10-2":"@"
            };
            return answers[qname];
        }

        // Save progress to Google Sheet
        async function saveProgress(stage, percentage) {
            const payload = {
                name: localStorage.getItem("name") || "Guest",
                email: localStorage.getItem("email") || "guest@example.com",
                course_name: "Python Programming",
                stage_no: stage,
                percentage: percentage
            };
            await fetch("https://script.google.com/macros/s/AKfycbxApgefcqGK1KLybeyHiVlnbNKDM9oXL0d7-c_MyIsMiv3qvlj6-Og1RTsOU5KrSFGl/exec", {
                method: "POST",
                body: JSON.stringify(payload)
            });
        }

        // Unlock next stage
        function unlockNextStage(stage) {
            const next = document.getElementById(`stage-${stage+1}`);
            if (next) next.classList.remove("hidden");
            else document.getElementById("completion").classList.remove("hidden");
        }

        // Load progress from Google Sheet
        async function loadProgress(email) {
            const url = `https://script.google.com/macros/s/AKfycbxApgefcqGK1KLybeyHiVlnbNKDM9oXL0d7-c_MyIsMiv3qvlj6-Og1RTsOU5KrSFGl/exec?email=${email}&course_name=Python%20Programming`;
            const res = await fetch(url);
            const data = await res.json();
            if (data.progress) {
                const stage = Number(data.progress.stage_no);
                for (let i = 1; i <= stage; i++) {
                    document.getElementById(`stage-${i}`).classList.remove("hidden");
                }
                unlockNextStage(stage);
            } else {
                document.getElementById("stage-1").classList.remove("hidden");
            }
        }

        // On page load
        window.onload = () => {
            const email = localStorage.getItem("email") || "guest@example.com";
            loadProgress(email);
        };
    </script>
</body>
</html>
